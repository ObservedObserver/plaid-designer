(this["webpackJsonpjk-skirt-designer"]=this["webpackJsonpjk-skirt-designer"]||[]).push([[0],{179:function(e,t,n){e.exports=n(315)},184:function(e,t,n){},302:function(e,t,n){},315:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(27),o=n.n(c),l=(n(184),n(46)),i=n(69);function u(e,t,n){var a,r,c=[],o=e,l=e+1,i=Math.min(t,n-l),u=Math.min(n,t+l),m=Math.max(0,-l),s=Math.max(0,l),f=Math.min(t,n-o),d=Math.min(n,t+o),h=Math.max(0,-o),v=Math.max(0,o);for(a=m,r=s;a<=i&&r<=u;a++)(r=a+l)<=u&&r>=s&&c.push([a,r]),r+1<=u&&r+1>=s&&c.push([a,r+1]);for(var b=f,p=d;b>=h&&p>=v;b--)(p=b+o)<=d&&p>=v&&c.push([b,p]),p-1<=d&&p-1>=v&&c.push([b,p-1]);return c}var m=function(e){var t=e.width,n=e.height,c=e.pixSize,o=Object(a.useMemo)((function(){return function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=[],r=-e;r<=t;r+=4){var c=u(r,e,t);a.push(c.map((function(e){return[e[0]*n,e[1]*n]})))}return a}(t,n,c)}),[t,n,c]),l=Object(a.useMemo)((function(){return function(e){var t,n=[],a=Object(i.a)(e);try{for(a.s();!(t=a.n()).done;){for(var r=t.value,c="M ".concat(r[0].join(" ")," "),o=1;o<r.length;o++)c+="L ".concat(r[o].join(" ")," ");c+="Z",n.push(c)}}catch(l){a.e(l)}finally{a.f()}return n}(o)}),[o]);return r.a.createElement("defs",null,r.a.createElement("mask",{id:"Mask"},l.map((function(e,t){return r.a.createElement("path",{key:t,d:e,fill:"white"})}))))},s=function(e){var t=e.segments;return r.a.createElement("g",null,t.map((function(e,t){return r.a.createElement("rect",{key:t,width:"100%",x:"0",height:e.end-e.start,y:e.start,fill:e.color})})))},f=function(e){var t=e.segments;return r.a.createElement("g",null,t.map((function(e,t){return r.a.createElement("rect",{key:t,height:"100%",y:"0",width:e.end-e.start,x:e.start,fill:e.color,mask:"url(#Mask)"})})))},d=n(123),h=n(64),v=n(321),b=n(91),p=n(38),g=n(317),E=n(65),j=n(320),O=n(50),k=n(39),x=n(45),y=n(76),M=n(32);function w(e,t){for(var n=[],a=0;a<e;a++){var r=t.func(a,e);n.push(r)}return n}var S=Math.PI,C=[{name:"sin-extended",func:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Math.round(Math.pow(8*(.8+.2*Math.random())*Math.abs(Math.sin(2*S/(2*t)*e+.382*S))+2*Math.random()+5,4))}},{name:"normal-extended",func:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return 1/(Math.sqrt(2*S)*t/4)*Math.exp(-1*Math.pow(e-t/6-Math.random(),2)/Math.pow(2*t/4,2))}}],G=n(144),I=n.n(G),z=n(169);function P(e){var t=new z.a.IsolationForest,n=e.map((function(e){return I()(e).hcl()}));t.fit(n);for(var a=[],r=0;r<e.length;r++)a.push([e[r],t.anomalyScore(n[r])]);return a.sort((function(e,t){return e[1]-t[1]})),a.map((function(e){return e[0]}))}var N=[["555b6e","89b0ae","bee3db","faf9f9","ffd6ba"],["2d3142","4f5d75","bfc0c0","ffffff","ef8354"],["d8e2dc","ffffff","ffcad4","f4acb7","9d8189"],["b8d8ba","d9dbbc","fcddbc","ef959d","69585f"],["ffcdb2","ffb4a2","e5989b","b5838d","6d6875"],["05668d","028090","00a896","02c39a","f0f3bd"],["fe938c","e6b89c","ead2ac","9cafb7","4281a4"]].map((function(e){return e.map((function(e){return"#"+e}))})),L=["#644e2d","#f8ea7e","#e69214","#3f3dd6","#f5f1d2"],R=["#e63946","#f1faee","#a8dadc","#457b9d","#1d3557"],T=w(18,C[0]),B=Object(y.a)(T).sort((function(e,t){return e-t})),J=new Map;B.forEach((function(e,t){J.set(e,t)}));var A=function(e){return Math.max(0,e)},H=T.map((function(e,t){return{size:e,color:Math.floor(5*(1-J.get(e)/J.size)+A(Math.sin(2*Math.PI/4*t))+5)%5}})),W={commonStore:new(function(){function e(){Object(k.a)(this,e),this.colorGrids=[],this.colorSchemeIndex=0,this.colorSchemePool=[],this.colorGrids=H,this.colorSchemeIndex=0,this.colorSchemePool=[P(L),P(R)].concat(Object(y.a)(N.map((function(e){return P(e)})).slice(0,2))),Object(M.d)(this,{colorSchemePool:M.f.ref})}return Object(x.a)(e,[{key:"setColorSchemeIndex",value:function(e){this.colorSchemeIndex=e}},{key:"setGridSize",value:function(e,t){this.colorGrids[t].size=e}},{key:"setGridColor",value:function(e,t){this.colorGrids[t].color=e}},{key:"deleteGrid",value:function(e){this.colorGrids.splice(e,1)}},{key:"addGrid",value:function(){this.colorGrids.push({size:Math.round(40*Math.random())+10,color:Math.round(Math.random()*this.colorScheme.length-1)})}},{key:"init",value:function(e,t){var n=w(e,C[t]),a=Object(y.a)(n).sort((function(e,t){return e-t})),r=new Map;a.forEach((function(e,t){r.set(e,t)}));var c=n.map((function(e,t){return{size:e,color:Math.floor(5*(1-r.get(e)/r.size)+A(Math.sin(2*Math.PI/4*t))+5)%5}}));console.log(Object(M.h)(c)),console.log(n),this.colorGrids=c}},{key:"parseGrids",value:function(e){this.colorGrids=JSON.parse(e)}},{key:"colorScheme",get:function(){return this.colorSchemePool[this.colorSchemeIndex]}},{key:"segments",get:function(){return function(e,t,n){for(var a=0,r=0,c=0;c<e.length;c++)a+=e[c].size;for(var o=[],l=0;l<e.length;l++)o.push({start:r*t/a,end:(r+e[l].size)*t/a,color:n[e[l].color%n.length]}),r+=e[l].size;return o}(this.colorGrids,400,this.colorScheme)}}]),e}())},q=r.a.createContext(W),D=function(e){return r.a.createElement(q.Provider,{value:W},e.children)};function F(){return Object(a.useContext)(q)}function U(){var e=Object(h.a)(["\n    width: 14px;\n    height: 14px;\n    margin: 4px;\n    background-color: ",";\n"]);return U=function(){return e},e}var Z=E.a.div(U(),(function(e){return e.color})),$=Object(O.a)((function(e){var t=F().commonStore,n=t.colorGrids,c=t.colorScheme,o=Object(a.useCallback)((function(e,n){t.setGridSize(e,n)}),[t]),l=Object(a.useCallback)((function(e,n){t.setGridColor(e,n)}),[t]),i=Object(a.useCallback)((function(e){t.deleteGrid(e)}),[t]),u=Object(a.useCallback)((function(){t.addGrid()}),[t]),m=Object(M.h)(n).map((function(e,t){return Object(d.a)(Object(d.a)({},e),{},{key:t})})),s=Object(a.useMemo)((function(){return[{title:"\u5927\u5c0f",dataIndex:"size",key:"size",width:40,render:function(e,t,n){return r.a.createElement(v.a,{min:0,step:1,value:t.size,onChange:function(e){o(Number(e),n)}})}},{title:"\u989c\u8272",dataIndex:"color",key:"color",width:30,render:function(e,t,n){return r.a.createElement(b.a,{value:t.color,onChange:function(e){l(e,n)}},c.map((function(e,t){return r.a.createElement(b.a.Option,{key:e,value:t},r.a.createElement(Z,{color:e}))})))}},{title:"\u7f16\u8f91",key:"edit",width:30,render:function(e,t,n){return r.a.createElement(j.a,{onClick:function(){i(n)}})}}]}),[l,o,c,i]);return r.a.createElement("div",null,r.a.createElement("div",{style:{marginBottom:"1em"}},r.a.createElement(p.a,{type:"primary",onClick:u},"\u6dfb\u52a0\u6761\u7eb9")),r.a.createElement("div",null,r.a.createElement(g.a,{pagination:!1,bordered:!0,size:"small",dataSource:m,columns:s,scroll:{y:550}})))}));function K(){var e=Object(h.a)(["\n    padding: 2em 2em;\n"]);return K=function(){return e},e}function Q(){var e=Object(h.a)(["\n    box-shadow: 0px 3px 12px 4px rgba(0, 0, 0, 0.12);\n"]);return Q=function(){return e},e}var V=E.a.div(Q()),X=E.a.div(K()),Y=n(75),_=n(322),ee=n(323),te=n(318),ne=(n(302),Object(O.a)((function(e){var t=F().commonStore,n=Object(a.useState)(18),c=Object(l.a)(n,2),o=c[0],i=c[1],u=Object(a.useState)(0),m=Object(l.a)(u,2),s=m[0],f=m[1],d=Object(a.useCallback)((function(){t.init(o,s)}),[o,s,t]);return r.a.createElement("div",null,r.a.createElement(v.a,{"aria-label":"grid-count",value:o,onChange:function(e){i(Number(e))}}),r.a.createElement(v.a,{"aria-label":"grid-func",value:s,onChange:function(e){f(Number(e))}}),r.a.createElement(b.a,{value:s,onChange:function(e){f(Number(e))}},C.map((function(e,t){return r.a.createElement(b.a.Option,{value:t,key:e.name},e.name)}))),r.a.createElement(p.a,{type:"primary",onClick:d},"Submit or Refresh"))})));function ae(){var e=Object(h.a)(["\n    flex-grow: 1;\n    background-color: ",";\n"]);return ae=function(){return e},e}function re(){var e=Object(h.a)(["\n    display: flex;\n    height: 28px;\n    width: 360px;\n    padding: 4px;\n"]);return re=function(){return e},e}var ce=E.a.div(re()),oe=E.a.div(ae(),(function(e){return e.color})),le=function(e){var t=e.colorPool;return r.a.createElement(ce,null,t.map((function(e){return r.a.createElement(oe,{key:e,color:e})})))},ie=Object(O.a)((function(e){var t=F().commonStore,n=t.colorSchemeIndex,a=t.colorSchemePool;return r.a.createElement("div",{style:{marginBottom:"1em"}},r.a.createElement(b.a,{value:n,onChange:function(e){t.setColorSchemeIndex(e)}},a.map((function(e,t){return r.a.createElement(b.a.Option,{key:t,value:t},r.a.createElement(le,{colorPool:e}))}))))})),ue=n(319),me=Object(O.a)((function(e){var t=F().commonStore,n=Object(a.useState)('[{"color": 1, "size": 12}]'),c=Object(l.a)(n,2),o=c[0],i=c[1];return r.a.createElement("div",{style:{marginTop:"2em"}},r.a.createElement("code",null,"gridSizeList = [",t.colorGrids.map((function(e){return e.size})).join(",\n"),"]",r.a.createElement("br",null),"color = [",t.colorScheme.join(",\n"),"]"),r.a.createElement("h2",null,"\u81ea\u5b9a\u4e49grid\u4fe1\u606f"),r.a.createElement(ue.a.TextArea,{value:o,onChange:function(e){i(e.target.value)}}),r.a.createElement(p.a,{style:{marginTop:"1em"},onClick:function(){t.parseGrids(o)}},"\u63d0\u4ea4"))}));var se=Object(O.a)((function(){var e=Object(a.useRef)(null),t=Object(a.useRef)(null),n=Object(a.useRef)(null),c=F().commonStore,o=Object(a.useState)(""),i=Object(l.a)(o,2),u=i[0],d=i[1],h=Object(a.useState)(!1),v=Object(l.a)(h,2),b=v[0],g=v[1],E=c.segments,j=Object(a.useCallback)((function(){if(e.current){var t="data:image/svg+xml;base64,"+btoa(e.current.innerHTML),a=new Image;a.src=t,a.width=400,a.height=400,a.onload=function(){if(console.log("content",t),n.current){var e=n.current.getContext("2d");e&&(e.drawImage(a,0,0,200,200),e.drawImage(a,0,200,200,200),e.drawImage(a,200,0,200,200),e.drawImage(a,200,200,200,200))}}}}),[]),O=Object(a.useCallback)((function(){if(e.current){var t="data:application/octet-stream,"+encodeURIComponent(e.current.innerHTML);d(t)}}),[]),k=Object(a.useCallback)((function(){g((function(e){return e||j(),!e}))}),[]);return Object(a.useEffect)((function(){t.current&&""!==u&&t.current.click()}),[u]),r.a.createElement("div",{className:"App"},r.a.createElement(V,null,r.a.createElement(Y.a,null,r.a.createElement(Y.a.Item,null,"Plaid Designer"))),r.a.createElement(X,null,r.a.createElement(_.a,null,r.a.createElement(ee.a,{span:16},r.a.createElement(ie,null),r.a.createElement("div",{ref:e},r.a.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",style:{width:"".concat(400,"px"),height:"".concat(400,"px")}},r.a.createElement(m,{width:400,height:400,pixSize:2}),r.a.createElement("g",null,r.a.createElement(s,{segments:E}),r.a.createElement(f,{segments:E})))),r.a.createElement("div",null,r.a.createElement(ne,null)),r.a.createElement("div",null,r.a.createElement(p.a,{type:"primary",onClick:O},"\u4e0b\u8f7dsvg\u6587\u4ef6"),r.a.createElement(p.a,{style:{marginLeft:"4px"},onClick:k},"\u9884\u89c8"),r.a.createElement("a",{style:{display:"none"},download:"skirt-plaid-pattern.svg",ref:t,href:u},"download")),r.a.createElement("div",null,r.a.createElement(me,null))),r.a.createElement(ee.a,{span:8},r.a.createElement($,null)))),r.a.createElement(te.a,{title:"\u9884\u89c8",visible:b,onOk:k,onCancel:k},r.a.createElement("canvas",{width:400,height:400,ref:n})))}));var fe=function(){return r.a.createElement(D,null,r.a.createElement(se,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(fe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[179,1,2]]]);
//# sourceMappingURL=main.d24ef707.chunk.js.map